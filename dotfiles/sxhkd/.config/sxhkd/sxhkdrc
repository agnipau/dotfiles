#
# sxhkd config file
#

# WM indipendent keybindings
## Terminal (tiling mode)
super + Return
        st

## Terminal (floating mode)
alt + Return
        bspc rule --add st-256color:hasdof --one-shot state=floating && st -n hasdof

## Draw a terminal (floating mode)
alt + z
        $HOME/bin/draw-bspwm

## Change to another dark/light colorscheme using wal
super + {_,shift + }c
        wal -c -q --iterative --backend "wal" \
	    -i "${HOME}/progetti/wallpapers" \
	    -o "${HOME}/bin/wal-set" {_,-l}

## Make current colorscheme dark/light using wal
alt + {_,shift + }c
        wal -c -q --backend "wal" \
	    -i "$(cat ${HOME}/.cache/wal/wal)" \
	    -o "${HOME}/bin/wal-set" {_,-l}

## Rofi
super + {d,D}
        rofi -show {run,window}

## Take a screenshot
super + shift + p
        scrot 'Screen_%d.%m.%y_%H.%M.%S.png' \
              -e 'mv $f ~/immagini; notify-send "Scrot" "Screenshot taken"'

## Start a screencast
super + w
        notify-send "Screencast" "Starting to record..."; \
        ffmpeg -f x11grab \
               -s 1366x768 \
               -an -i :0.0 \
               -c:v libvpx \
               -b:v 5M \
               -crf 10 \
               -quality realtime \
               -y ${HOME}/video/record.mkv

## Stop the screencast
super + shift + w
        killall -9 ffmpeg; \
        notify-send "Screencast" "Finished to record"

## Lock screen
super + shift + s
        slock

## Make sxhkd reload its configuration files
super + Escape
	pkill -USR1 -x sxhkd

# bspwm
## Quit bspwm normally
super + control + q
	bspc quit

## Close and kill
super + {_,shift + }q
	bspc node --{close,kill}

alt + {_,shift + }q
	bspc node --{close,kill}

## Alternate between the tiled and monocle layout
super + m
	bspc desktop --layout next

## Send the newest marked node to the newest preselected node
super + y
	bspc node newest.marked.local -n newest.!automatic.local

## Swap the current node and the biggest node
super + {shift + }g
	bspc node --swap biggest{.local}

# State/Flags
## Set the window state
super + {t,p,f,x}
	bspc node --state {tiled,pseudo_tiled,floating,fullscreen}

alt + {t,p,f,x}
	bspc node --state {tiled,pseudo_tiled,floating,fullscreen}

## Set the node flags
super + {u,s,y}
	bspc node --flag {locked,sticky,private}

alt + {u,s,y}
	bspc node --flag {locked,sticky,private}

# Focus/Swap
## Focus the node in the given direction
super + {_,shift + }{h,j,k,l}
	bspc node --{focus,swap} {west,south,north,east}

## Focus the node for the given path jump
super + {p,b,comma,period}
	bspc node --focus @{parent,brother,first,second}

## Focus the next/previous node in the current desktop
super + {_,shift + }n
	bspc node --focus {next,prev}.local

alt + {_,shift + }n
	bspc node --focus {next,prev}.local

## Focus the next/previous desktop in the current monitor
super + control + {_,shift + }n
	bspc desktop --focus {next,prev}.local

alt + control + {_,shift + }n
	bspc desktop --focus {next,prev}.local

## Focus the last node/desktop
super + {_,shift + }Tab
	bspc {node,desktop} --focus last

alt + {_,shift + }Tab
	bspc {node,desktop} --focus last

## Focus the older or newer node in the focus history
super + {o,i}
	bspc wm --record-history off; \
	bspc node {older,newer} --focus; \
	bspc wm --record-history on

alt + {o,i}
	bspc wm --record-history off; \
	bspc node {older,newer} --focus; \
	bspc wm --record-history on

## Focus or send to the given desktop
super + {_,shift + }{1-9,0}
	bspc {desktop --focus,node --to-desktop} '^{1-9,10}'

alt + {_,shift + }{1-9,0}
	bspc {desktop --focus,node --to-desktop} '^{1-9,10}'

alt + control + {1-9,0}
        bspc {node --to-desktop} '^{1-9,10}' --follow

# Preselect
## Preselect the direction
super + ctrl + {h,j,k,l}
	bspc node --presel-dir {west,south,north,east}

## Preselect the ratio
super + ctrl + {1-9}
	bspc node --presel-ratio 0.{1-9}

## Cancel the preselection for the focused node
super + ctrl + space
	bspc node --presel-dir cancel

## Cancel the preselection for the focused desktop
super + ctrl + shift + space
	bspc query --nodes -d | xargs -I id -n 1 bspc node id --presel-dir cancel

# Move/Resize (with features I like from 2bwm)
## Resize a tiled window (bspwm style)
super + shift + control + {h,j,k,l}
        bspc node --resize {left -20 0,bottom 0 20, top 0 -20, right 20 0}

## Resize a floating window (fast mode, 2bwm style)
alt + shift + {h,j,k,l}
	bspc node --resize {right -20 0,bottom 0 20,bottom 0 -20,right 20 0}

## Resize a floating window (slow mode, 2bwm style)
alt + shift + control + {h,j,k,l}
	bspc node --resize {right -10 0,bottom 0 10,bottom 0 -10,right 10 0}

## Move a floating window (fast mode, 2bwm style)
alt + {h,j,k,l}
	bspc node --move {-40 0,0 40,0 -40,40 0}

## Move a floating window (slow mode, 2bwm style)
alt + control + {h,j,k,l}
	bspc node --move {-20 0,0 20,0 -20,20 0}
